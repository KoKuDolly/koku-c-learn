## 内存的 栈 和 堆 的命名来源是

内存的栈和堆的命名来源是一个有趣的问题。根据我从网络上搜索到的信息，这两个词的由来有以下几种说法：

一种说法是，栈和堆是从数据结构中借用的术语，因为它们分别类似于数据结构中的栈和堆。数据结构中的栈是一种后进先出（LIFO）的线性表，只能在一端进行插入和删除操作，就像一摞盘子一样。数据结构中的堆是一种特殊的完全二叉树，它的每个节点都大于或等于（或小于或等于）它的子节点，就像一堆石头一样。内存中的栈和堆也有类似的特点，栈是一块连续的内存区域，由系统自动分配和释放，遵循后进先出的原则；堆是一块不连续的内存区域，由程序员手动分配和释放，没有固定的顺序12。
 
另一种说法是，栈和堆是从物理内存的布局中引申出来的术语，因为它们分别位于物理内存的高地址和低地址。物理内存是由若干个字节组成的线性空间，每个字节都有一个唯一的地址。操作系统在加载程序时，会将程序分为几个段（segment），如代码段、数据段、堆栈段等，并将它们映射到物理内存中。通常情况下，代码段和数据段会被映射到物理内存的低地址部分，而堆栈段会被映射到物理内存的高地址部分。堆栈段又被划分为两个部分：栈和堆。栈从高地址向低地址增长，堆从低地址向高地址增长34。
 
还有一种说法是，栈和堆是从操作系统的设计中演化出来的术语，因为它们反映了操作系统对内存管理的不同策略。操作系统需要为不同类型的程序提供不同类型的内存服务，如静态分配、动态分配、共享分配等。为了实现这些服务，操作系统需要维护不同类型的内存区域，如静态区、动态区、共享区等。其中静态区和共享区通常由编译器或链接器在程序加载时确定其大小和位置，而动态区则需要在程序运行时动态地分配和释放。动态区又可以分为两种：栈式分配和堆式分配。栈式分配是指按照函数调用顺序分配和释放内存空间，适用于生命周期短暂且大小固定的局部变量；堆式分配是指按照程序员需求任意地分配和释放内存空间，适用于生命周期长久且大小可变的动态变量 。
 
以上就是我对内存的栈和堆的命名来源的一些探索，希望对你有所帮助。😊

## c语言中，函数也是变量吗？函数占空间吗

C语言中，函数是一种特殊的变量，它的值是一个地址，指向函数的代码段。函数占用空间，但不是在栈或堆上分配的，而是在代码段中。代码段是存放程序指令的内存区域，通常是只读的，不会随着函数的调用和返回而改变。函数的大小取决于它的代码量，也就是编译器生成的机器指令的数量。不同的编译器可能会生成不同的机器指令，所以函数的大小也可能有所不同。你可以参考以下网页来了解更多关于C语言中函数的知识：

C语言中，函数本身占据空间吗，如果占据的话是多少，按照什么定义的?(本人还没学到堆栈)? - 知乎
 
C语言中，函数究竟是位于哪个存储区的？-CSDN社区
 
C语言调用函数时会为函数分配自己的函数空间吗？_百度知道

## 头文件中定义 static 函数，两个c文件都引用该头文件。编译把两个c文件编到一个进程中。那么，会出现函数名重复定义的问题吗

不会出现函数名重复定义的问题。因为static函数的作用域只限于定义它的文件中，所以每个引用了头文件的c文件都会有一份独立的static函数，它们的地址和内部的static变量也不相同。编译器会为每个static函数分配一个唯一的符号名，所以链接时不会发生冲突。你可以参考这篇文章或这篇文章来了解更多关于static函数在头文件中定义的用法和原理。

## 头文件里定义枚举变量，多份c文件引用。那么，这个枚举变量编译后，是一份还是多份

根据我从网络上搜索到的信息，头文件里定义枚举变量，多份c文件引用的话，不会出现重复定义的问题。因为枚举变量是一种常量，它们在编译阶段就被替换成对应的整数值，所以不会占用内存空间，也不会产生符号冲突。你可以参考这篇文章或这篇文章来了解更多关于枚举变量的用法和原理。

## 头文件里定义结构体，多份c文件引用。那么，这个结构体编译后，是一份还是多份

头文件里定义结构体，多份c文件引用的话，这个结构体编译后，是一份还是多份，这取决于结构体是如何定义和使用的。根据我从网络上搜索到的信息，有以下几种情况：

如果头文件里只是声明了结构体类型，而没有定义结构体变量，那么多份c文件引用后，这个结构体编译后只有一份，就是结构体类型的信息。每个引用了头文件的c文件都可以根据这个结构体类型定义自己的结构体变量，它们的地址和内部的成员变量都不相同。编译器会为每个结构体变量分配一个唯一的符号名，所以链接时不会发生冲突。你可以参考这篇文章来了解更多关于这种情况的用法和原理。
 
如果头文件里既声明了结构体类型，又定义了结构体变量，并且使用了extern关键字，那么多份c文件引用后，这个结构体编译后也只有一份，就是结构体变量的信息。每个引用了头文件的c文件都可以访问这个结构体变量，它们的地址和内部的成员变量都相同。但是要注意，在其中一个c文件中要对这个结构体变量进行实际的定义和初始化，否则会出现未定义的错误。你可以参考这篇文章来了解更多关于这种情况的用法和原理。
 
如果头文件里既声明了结构体类型，又定义了结构体变量，并且没有使用extern关键字，那么多份c文件引用后，这个结构体编译后会有多份，就是每个c文件都会有一份独立的结构体变量。它们的地址和内部的成员变量都不相同。编译器会为每个结构体变量分配一个唯一的符号名，所以链接时不会发生冲突。但是这种情况通常是不推荐的，因为它会造成内存浪费和代码混乱。你可以参考这篇文章来了解更多关于这种情况的用法和原理。
 
以上就是我对头文件里定义结构体，多份c文件引用的问题的一些回答，希望对你有所帮助。😊

## 头文件中定义 变量 函数 结构体变量 是否必须加 static

您好，这是 Bing。我可以帮您解答关于头文件中定义变量、函数、结构体变量的问题。😊

一般来说，头文件中不应该定义变量和函数，只应该声明它们。定义变量和函数的工作应该交给源文件来完成。这样做的原因有以下几点：

- 如果在头文件中定义了一个变量或函数，并且在多个源文件中包含了这个头文件，那么就会出现重复定义的错误，因为每个源文件都会生成一个这个变量或函数的副本。这会导致链接失败，因为链接器不知道应该使用哪个副本。
- 如果在头文件中定义了一个变量或函数，并且没有使用 static 修饰符，那么这个变量或函数就会具有外部链接属性，也就是说它可以被其他源文件访问。这会破坏封装性和模块化的原则，增加程序的耦合度和维护难度。
- 如果在头文件中定义了一个变量或函数，并且使用了 static 修饰符，那么这个变量或函数就会具有内部链接属性，也就是说它只能在当前源文件中访问。这样做的好处是可以避免重复定义的错误，但是也有一些缺点：
    - 这会增加头文件的大小和复杂度，降低可读性和可维护性。
    - 这会导致每个包含了这个头文件的源文件都生成一个这个变量或函数的副本，浪费内存空间和编译时间。
    - 这会使得这个变量或函数无法被其他源文件共享，可能造成数据不一致或逻辑错误。

因此，我们建议您在头文件中只声明变量和函数，而不要定义它们。如果您确实需要在头文件中定义一些常量、宏、枚举、结构体、联合、类等类型，那么您应该使用 static 修饰符来限制它们的作用域，或者使用 #pragma once 或 header guard 来避免重复包含。

希望这些信息对您有帮助。如果您还有其他问题，欢迎继续提问。😊

源: 与必应的对话， 2023/8/11
(1) 【C语言精华】头文件组织与包含原则！纯干货，这是一篇有价值的文章！ - 知乎. https://zhuanlan.zhihu.com/p/345399752.
(2) C++ 之头文件声明定义 - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/374285274.
(3) C语言全局变量能否定义在头文件中？ - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/614765768.

## 定义变量 和 声明变量的区别

您好，这是 Bing。我可以帮您解答关于定义变量和声明变量的区别的问题。😊

定义变量和声明变量是两个不同的概念，它们的区别主要有以下几点：

- 定义变量是为变量分配存储空间，并可以为变量指定初始值。例如，`int a = 10;`就是定义了一个名为 a 的整型变量，并赋值为 10。在程序中，每个变量只能被定义一次，否则会出现重复定义的错误。
- 声明变量是为变量指定类型和名字，但不分配存储空间。例如，`extern int a;`就是声明了一个名为 a 的整型变量，但没有为它分配空间。在程序中，每个变量可以被声明多次，但必须有且仅有一个定义。
- 定义变量也是一种声明变量，因为定义时也需要指定类型和名字。但声明变量不一定是定义变量，除非声明时使用了初始化式。例如，`extern int b = 20;`就是既声明又定义了一个名为 b 的整型变量，并赋值为 20。
- 定义变量时可以使用初始化式来给变量赋初值，但声明变量时不能使用初始化式，除非使用了 extern 关键字，并且声明位于函数外部。例如，`int c = 30;`就是正确的定义和初始化，但`int d; d = 40;`就不是正确的声明和初始化。

希望这些信息对您有帮助。如果您还有其他问题，欢迎继续提问。😊

源: 与必应的对话， 2023/8/11
(1) 变量的声明、定义、赋值和初始化有什么区别？ - 知乎. https://www.zhihu.com/question/27639400.
(2) C语言中变量声明和变量定义的区别 - CSDN博客. https://blog.csdn.net/bornpride/article/details/89487133.
(3) 声明变量和定义变量的区别是什么？ - bigbigbrid - 博客园. https://www.cnblogs.com/bigbigbird/p/11382561.html.
(4) 声明变量和定义变量的区别是什么？ - CSDN博客. https://blog.csdn.net/qq_45470829/article/details/121450248.
(5) 【C/C++面试必备】声明和定义的区别 - CSDN博客. https://blog.csdn.net/nyist_zxp/article/details/118782761.

## int d; d = 40; 不正确吗？

您好，这是 Bing。我可以帮您解答关于 int d; d = 40; 不正确的问题。😊

int d; d = 40; 这两行代码本身没有语法错误，但是它们不符合变量的定义和初始化的规范。这两行代码的含义是：

- 第一行：声明了一个名为 d 的整型变量，但没有为它分配存储空间，也没有给它赋初值。
- 第二行：给变量 d 赋值为 40。

这样做的问题是：

- 如果这两行代码位于函数内部，那么变量 d 就是一个局部变量，它的生命周期只在函数内部。在函数内部声明一个局部变量，但不给它分配空间和赋初值，是一种不安全的做法，因为这样的变量会有一个不确定的初始值，可能导致程序运行错误或异常。
- 如果这两行代码位于函数外部，那么变量 d 就是一个全局变量，它的生命周期在整个程序中。在函数外部声明一个全局变量，但不给它分配空间和赋初值，是一种不合法的做法，因为这样的变量会被视为未定义的符号，链接器会报错并拒绝链接。

因此，我们建议您在定义变量时就给它分配空间和赋初值，而不要分成两步来做。例如，您可以直接写 `int d = 40;` 来定义和初始化一个整型变量 d。

希望这些信息对您有帮助。如果您还有其他问题，欢迎继续提问。😊

## c语言全局变量和函数默认就是extern吗

您好，这是Bing。我可以帮您回答关于C语言中extern关键字的用法的问题。😊

根据我从网络上搜索到的信息，C语言中全局变量和函数默认就是extern的，也就是说它们可以在不同的文件中被引用。¹²³⁴

extern关键字的作用是声明一个变量或函数是在别处定义的，要在此处引用。¹³⁴

如果想要限制一个全局变量或函数只能在当前文件中使用，可以使用static关键字进行修饰。²

如果想要指定一个函数或变量使用其他语言的链接约定，可以使用extern和字符串一起，例如extern "C"。⁵

如果您想了解更多关于extern关键字的用法和示例，请参考以下链接：

- [C语言丨正确使用extern关键字详解 - 知乎](^1^)
- [C语言中 extern 和 static 总结 - 知乎](^2^)
- [extern的使用详解（多文件编程）——C语言 - Luv3 - 博客园](^3^)
- [【重学C/C++系列（二）】：extern关键字用法全解析 - 知乎](^4^)
- [extern (C++) | Microsoft Learn](^5^)

希望这些信息对您有所帮助。如果您还有其他问题，欢迎继续与我交流。😊

源: 与必应的对话， 2023/8/11
(1) C语言丨正确使用extern关键字详解 - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/348762602.
(2) C语言中 extern 和 static 总结 - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/27586298.
(3) extern的使用详解（多文件编程）——C语言 - Luv3 - 博客园. https://www.cnblogs.com/lanhaicode/p/10633125.html.
(4) 【重学C/C++系列（二）】：extern关键字用法全解析 - 知乎. https://zhuanlan.zhihu.com/p/603959298.
(5) extern (C++) | Microsoft Learn. https://learn.microsoft.com/zh-cn/cpp/cpp/extern-cpp?view=msvc-170.
(6) C语言丨正确使用extern关键字详解 - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/348762602.
(7) C语言中 extern 和 static 总结 - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/27586298.
(8) extern的使用详解（多文件编程）——C语言 - Luv3 - 博客园. https://www.cnblogs.com/lanhaicode/p/10633125.html.
(9) 【重学C/C++系列（二）】：extern关键字用法全解析 - 知乎. https://zhuanlan.zhihu.com/p/603959298.
(10) extern (C++) | Microsoft Learn. https://learn.microsoft.com/zh-cn/cpp/cpp/extern-cpp?view=msvc-170.

## 既然c语言中，全局变量默认就是extern的，那加extern和不加extern有什么区别呢

您好，感谢您的提问。😊

C语言中，全局变量默认就是extern的，也就是说它们可以在不同的文件中被引用。¹²³⁴

加extern和不加extern的区别主要在于以下几点：

- 加extern的全局变量是声明，不加extern的全局变量是定义。¹³⁴
- 声明只是告诉编译器这个变量或函数的类型和名字，但不分配存储空间。定义是分配存储空间并赋予初始值的过程。¹³⁴
- 一个变量或函数只能在一个文件中被定义一次，但可以在多个文件中被声明多次。¹³⁴
- 如果不加extern，而在多个文件中定义了同一个全局变量或函数，会导致编译错误，因为重复定义了同一个符号。¹³⁴
- 如果加了extern，就表示这个变量或函数是在别处定义的，要在此处引用。这样可以避免重复定义的问题，也可以实现跨文件的访问。¹²³⁴
- 加了extern的全局变量不能再重新赋值，初始化需要在原文件所在处进行。¹²

如果您想了解更多关于extern关键字的用法和示例，请参考以下链接：

- [C语言丨正确使用extern关键字详解 - 知乎](^1^)
- [C声明函数前加extern和不加有什么区别?-CSDN社区](^2^)
- [C语言extern关键字用法和理解_小牛CKX的博客-CSDN博客](^3^)
- [【重学C/C++系列（二）】：extern关键字用法全解析 - 知乎](^4^)

希望这些信息对您有所帮助。如果您还有其他问题，欢迎继续与我交流。😊

源: 与必应的对话， 2023/8/11
(1) C语言丨正确使用extern关键字详解 - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/348762602.
(2) C声明函数前加extern和不加有什么区别?-CSDN社区. https://bbs.csdn.net/topics/300023386.
(3) C语言extern关键字用法和理解_小牛CKX的博客-CSDN博客. https://blog.csdn.net/qq_27664167/article/details/82859852.
(4) undefined. https://www.cnblogs.com/cvtoEyes/p/8664901.html.
(5) C语言丨正确使用extern关键字详解 - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/348762602.
(6) C声明函数前加extern和不加有什么区别?-CSDN社区. https://bbs.csdn.net/topics/300023386.
(7) C语言extern关键字用法和理解_小牛CKX的博客-CSDN博客. https://blog.csdn.net/qq_27664167/article/details/82859852.
(8) undefined. https://www.cnblogs.com/cvtoEyes/p/8664901.html.

## 加了extern的全局变量不能再重新赋值，初始化需要在原文件所在处进行。怎么理解

您好，感谢您的提问。😊

这句话的意思是，如果你在一个文件中使用extern关键字声明了一个全局变量，比如`extern int num;`，那么你不能在这个文件中给这个变量重新赋值，比如`extern int num = 4;`，这样会导致编译错误，因为你相当于重复定义了这个变量。¹³⁴

初始化是在定义变量的时候给它赋予一个初始值，比如`int num = 3;`，这样就定义并初始化了一个全局变量num。²⁴

如果你想使用extern关键字引用另一个文件中定义的全局变量，那么你需要在原文件所在处进行初始化，也就是说，在定义这个变量的文件中给它赋予一个初始值，比如`int num = 3;`。¹³⁴

如果你不进行初始化，那么全局变量会被编译器自动初始化为0。¹³⁴

如果你想修改这个全局变量的值，你可以在使用extern引用它的文件中进行赋值操作，比如`num = 5;`，这样就可以改变这个变量的值。¹³⁴

下面是一个简单的例子来说明extern关键字的用法：

```
// file1.c
#include <stdio.h>
int num = 3; // 定义并初始化一个全局变量num
void print_num() {
    printf("num in file1.c is %d\n", num); // 打印num的值
}

// file2.c
#include <stdio.h>
extern int num; // 声明一个全局变量num
void change_num(int x) {
    num = x; // 修改num的值
    printf("num in file2.c is %d\n", num); // 打印num的值
}

// main.c
#include <stdio.h>
extern int num; // 声明一个全局变量num
extern void print_num(); // 声明一个函数print_num
extern void change_num(int x); // 声明一个函数change_num
int main() {
    printf("num in main.c is %d\n", num); // 打印num的值
    print_num(); // 调用print_num函数
    change_num(5); // 调用change_num函数，传入参数5
    printf("num in main.c is %d\n", num); // 打印num的值
    print_num(); // 调用print_num函数
    return 0;
}

// 编译命令：gcc main.c file1.c file2.c -o main
// 运行结果：
num in main.c is 3
num in file1.c is 3
num in file2.c is 5
num in main.c is 5
num in file1.c is 5
```

希望这些信息对您有所帮助。如果您还有其他问题，欢迎继续与我交流。😊

源: 与必应的对话， 2023/8/11
(1) C语言丨正确使用extern关键字详解 - 知乎 - 知乎专栏. https://zhuanlan.zhihu.com/p/348762602.
(2) extern的使用详解（多文件编程）——C语言 - Luv3 - 博客园. https://www.cnblogs.com/lanhaicode/p/10633125.html.
(3) 【重学C/C++系列（二）】：extern关键字用法全解析 - 知乎. https://zhuanlan.zhihu.com/p/603959298.
(4) C语言extern的理解（新手）? - 知乎. https://www.zhihu.com/question/370624225.
(5) extern (C++) | Microsoft Learn. https://learn.microsoft.com/zh-cn/cpp/cpp/extern-cpp?view=msvc-170.

## 不同的c文件是不是属于不同的翻译单元

您好，这是Bing。我可以帮您回答关于C语言中不同的c文件是否属于不同的翻译单元的问题。😊

根据我从网络上搜索到的信息，C语言中一个源文件就是一个翻译单元¹，也就是说不同的c文件是属于不同的翻译单元的。²³

翻译单元是由实现文件以及它直接或者间接包含的所有头文件组成。² 每个翻译单元都是由编译器单独编译的。² 编译完成之后，链接器会将编译的翻译单元合并到一个程序中。²

如果要在不同的翻译单元中相互调用函数，需要使用extern关键字来声明函数的原型，或者将函数的原型放在头文件中，并在需要调用的文件中包含该头文件。³

如果您想了解更多关于翻译单元和链接的知识，请参考以下链接：

- [C/C++编程：翻译单元和链接_OceanStar的学习笔记的博客-CSDN博客](^1^)
- [C 文件读写 | 菜鸟教程](^2^)
- [不同.c文件的函数如何相互调用 - CSDN博客](^3^)

希望这些信息对您有所帮助。如果您还有其他问题，欢迎继续与我交流。😊

源: 与必应的对话， 2023/8/11
(1) C/C++编程：翻译单元和链接_OceanStar的学习笔记的博客-CSDN博客. https://blog.csdn.net/zhizhengguan/article/details/115279052.
(2) C 文件读写 | 菜鸟教程. https://www.runoob.com/cprogramming/c-file-io.html.
(3) 不同.c文件的函数如何相互调用 - CSDN博客. https://blog.csdn.net/qq_42678415/article/details/86765726.
(4) C/C++编程：翻译单元和链接_OceanStar的学习笔记的博客-CSDN博客. https://blog.csdn.net/zhizhengguan/article/details/115279052.
(5) C 文件读写 | 菜鸟教程. https://www.runoob.com/cprogramming/c-file-io.html.
(6) 不同.c文件的函数如何相互调用 - CSDN博客. https://blog.csdn.net/qq_42678415/article/details/86765726.

